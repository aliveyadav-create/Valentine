<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lucky Valentine</title>

<style>
body{
margin:0;
font-family:Arial;
color:white;
text-align:center;
height:100vh;
background-size:contain;
background-repeat:no-repeat;
background-position:center;
background-color:black;
overflow:hidden;
}

.overlay{
background:rgba(0,0,0,0.35);
height:100%;
display:flex;
flex-direction:column;
align-items:center;
justify-content:flex-end;
padding-bottom:80px;
}

h1{
white-space:pre-line;
text-shadow:0 0 10px black;
margin-bottom:20px;
}

.heart-btn{
position:relative;
width:140px;
height:120px;
border:none;
background:none;
cursor:pointer;
margin:15px;
}

.heart-shape{
position:absolute;
width:90px;
height:90px;
background:red;
transform:rotate(-45deg);
top:20px;
left:25px;
animation:beat 1s infinite;
}

.heart-shape:before,
.heart-shape:after{
content:"";
position:absolute;
width:90px;
height:90px;
background:red;
border-radius:50%;
}

.heart-shape:before{top:-45px; left:0;}
.heart-shape:after{left:45px; top:0;}

.heart-btn span{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
font-weight:bold;
color:white;
z-index:2;
text-align:center;
}

@keyframes beat{
0%{transform:rotate(-45deg) scale(1);}
50%{transform:rotate(-45deg) scale(1.1);}
100%{transform:rotate(-45deg) scale(1);}
}

.piece{
position:absolute;
width:14px;
height:14px;
background:red;
border-radius:3px;
animation:fly .7s forwards;
}

@keyframes fly{
to{
transform:translate(var(--x),var(--y)) rotate(180deg);
opacity:0;
}
}

.bigHeart{
width:220px;
height:200px;
}

.bigHeart .heart-shape{
width:140px;
height:140px;
left:40px;
top:30px;
}

.bigHeart span{
font-size:18px;
width:140px;
white-space:normal;
line-height:1.2;
}

.finalText{
font-size:42px;
font-weight:bold;
animation:fadeIn 2s ease;
}

@keyframes fadeIn{
from{opacity:0; transform:scale(.8);}
to{opacity:1; transform:scale(1);}
}

#scratchCanvas{
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
z-index:5;
}

#scratchText{
position:absolute;
top:60%;
left:50%;
transform:translate(-50%,-50%);
font-size:30px;
font-weight:bold;
color:black;
z-index:6;
}
</style>
</head>

<body>

<div class="overlay">
<h1 id="text">ğŸ Lucky Reward at end \nTry Hard</h1>

<canvas id="scratchCanvas"></canvas>
<div id="scratchText">Scratch Here</div>

<div id="buttons" style="display:none; width:100%; height:260px; position:relative;"></div>
</div>

<audio id="bgmusic" loop preload="auto">
<source src="Romantic Bgmusic.mp3" type="audio/mpeg">
</audio>

<script>

let step=0;
let correctIndex=0;

const steps=[
{img:"rose.png",text:"Shipra Kya tum meri Valentine banogi?"},
{img:"rose.png",text:"Haan bologi to gulab dilaunga meri meri \nGULABOğŸŒ¹"},
{img:"propose.png",text:"Keh du tumhe ya chup rahun\nDil me mere aaj kya hai"},
{img:"choclate.png",text:"bann ja tu â€â™¡â‚ŠËš ğŸ«ãƒ»â‚Šâœ§ \nmeri Ishq-e-di chashni"},
{img:"teddy.png",text:"Achha meri panda ğŸ¼ğŸ€ ye to teddy\nab to ho jao Ready"},
{img:"promise.png",text:"Vada karta hun har dam dunga \ntumhara saath ğŸ«¶ğŸ»"},
{img:"hug.png",text:"Bahon me chale aao\nhumse sanam kya parda ğŸ«‚"},
{img:"kiss.png",text:"Last chance ğŸ˜ Zara zara \nkissğŸ˜˜ me kissğŸ˜˜ me"}
];

function heart(label,id,onclick,extra=""){
return `
<button class="heart-btn ${extra}" id="${id}" onclick="${onclick}">
<div class="heart-shape"></div>
<span>${label}</span>
</button>`;
}

function showButtons(){
document.getElementById("buttons").innerHTML=
heart("YES","yesBtn","finalYes()")+
heart("NO","noBtn","noClicked()");
}

function updateScreen(){
document.body.style.backgroundImage=`url(${steps[step].img})`;
document.getElementById("text").innerText=steps[step].text;
}

function burst(btn){
for(let i=0;i<12;i++){
let p=document.createElement("div");
p.className="piece";
p.style.left=(btn.offsetLeft+60)+"px";
p.style.top=(btn.offsetTop+60)+"px";
p.style.setProperty("--x",(Math.random()*220-110)+"px");
p.style.setProperty("--y",(Math.random()*220-110)+"px");
document.body.appendChild(p);
setTimeout(()=>p.remove(),700);
}
}

function noClicked(){
let btn=document.getElementById("noBtn");
burst(btn);
btn.style.visibility="hidden";

setTimeout(()=>{
step++;
if(step===steps.length){
showMultipleNo();
return;
}
updateScreen();
moveNo();
btn.style.visibility="visible";
},700);
}

function moveNo(){
let btn=document.getElementById("noBtn");
btn.style.position="absolute";
btn.style.left=Math.random()*70+"%";
btn.style.top=Math.random()*50+"%";
}

function showMultipleNo(){
let container=document.getElementById("buttons");
container.innerHTML="";
correctIndex=Math.floor(Math.random()*4);

for(let i=0;i<4;i++){
let btn=document.createElement("button");
btn.className="heart-btn";
btn.innerHTML='<div class="heart-shape"></div><span>NO</span>';
btn.style.position="absolute";
btn.style.left=(10+Math.random()*70)+"%";
btn.style.top=(10+Math.random()*50)+"%";

btn.onclick=()=>chooseNo(i,btn);
container.appendChild(btn);
}
}

function chooseNo(i,btn){
if(i===correctIndex){
document.getElementById("text").innerText=
"Hogya hai tujhko to pyaar Sajna â¤ï¸ \n Lakh kr le tu inkar Sajna";

document.getElementById("buttons").innerHTML=
heart("Han Pyaar Sajna","",`finalYes()`,"bigHeart");

}else{
burst(btn);
btn.remove();
}
}

function finalYes(){
document.body.style.backgroundImage="url(valentine.png)";
document.getElementById("buttons").innerHTML="";
document.getElementById("text").innerHTML=
'<div class="finalText">You are lucky<br>You redeemed me as coupon<br>I love you\nMy Wifey ğŸŒâ™¥ï¸ğŸ«µğŸ»</div>';
}

/* SCRATCH */

let canvas=document.getElementById("scratchCanvas");
let ctx=canvas.getContext("2d");

function resizeCanvas(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
ctx.fillStyle="#FFD700";
ctx.fillRect(0,0,canvas.width,canvas.height);
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

let isDrawing=false;

function getXY(e){
const rect=canvas.getBoundingClientRect();
if(e.touches){
return {
x:e.touches[0].clientX-rect.left,
y:e.touches[0].clientY-rect.top
};
}
return {x:e.clientX-rect.left,y:e.clientY-rect.top};
}

function scratch(x,y){
ctx.globalCompositeOperation="destination-out";
ctx.beginPath();
ctx.arc(x,y,35,0,Math.PI*2);
ctx.fill();
checkScratch();
}

canvas.addEventListener("mousedown",e=>{
isDrawing=true;
let pos=getXY(e);
scratch(pos.x,pos.y);
});

canvas.addEventListener("mousemove",e=>{
if(!isDrawing)return;
let pos=getXY(e);
scratch(pos.x,pos.y);
});

canvas.addEventListener("mouseup",()=>isDrawing=false);

canvas.addEventListener("touchstart",e=>{
isDrawing=true;
let pos=getXY(e);
scratch(pos.x,pos.y);
});

canvas.addEventListener("touchmove",e=>{
if(!isDrawing)return;
let pos=getXY(e);
scratch(pos.x,pos.y);
e.preventDefault();
},{passive:false});

canvas.addEventListener("touchend",()=>isDrawing=false);

function checkScratch(){
let imgData=ctx.getImageData(0,0,canvas.width,canvas.height);
let pixels=imgData.data;
let cleared=0;

for(let i=3;i<pixels.length;i+=4){
if(pixels[i]===0) cleared++;
}

if(cleared>pixels.length/25){
canvas.style.display="none";
document.getElementById("scratchText").style.display="none";
document.getElementById("buttons").style.display="block";

let music=document.getElementById("bgmusic");
music.play().catch(()=>{});

showButtons();
updateScreen();
}
}

</script>
</body>
</html>
